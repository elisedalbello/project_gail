class CreateTbProximasQuestoes < ActiveRecord::Migration
  def up
    execute <<-SQL
        CREATE TABLE tb_proximas_questoes(
            avaliacao_id INTEGER NOT NULL,
            questao_id INTEGER NOT NULL,
            alternativa_id INTEGER NOT NULL,
            proxima_questao INTEGER NOT NULL,
            PRIMARY KEY(avaliacao_id, questao_id, alternativa_id),
            CONSTRAINT FK_TB_PROXIMAS_QUESTOES
            FOREIGN KEY(avaliacao_id, questao_id,alternativa_id) REFERENCES tb_alternativas(avaliacao_id, questao_id, alternativa_id)
        );

        INSERT INTO tb_proximas_questoes
        VALUES
            (1,1,1,2),
            (1,1,2,3),
            (1,2,1,3),
            (1,2,2,3),
            (1,2,3,3),
            (1,3,1,4),
            (1,3,2,4),
            (1,4,1,5),
            (1,4,2,5),
            (1,5,1,6),
            (1,5,2,7),
            (1,6,1,7),
            (1,6,2,7),
            (1,6,3,7),
            (1,7,1,8),
            (1,7,2,8),
            (1,7,3,8),
            (1,7,4,8),
            (1,7,5,8),
            (1,8,1,9),
            (1,8,2,9),
            (1,8,3,9),
            (1,9,1,10),
            (1,9,2,10),
            (1,9,3,10),
            (1,10,1,11),
            (1,10,2,11),
            (1,10,3,11),
            (1,11,1,12),
            (1,11,2,12),
            (1,12,1,13),
            (1,12,2,13),
            (1,12,3,13),
            (1,12,4,13),
            (1,12,5,13),
            (1,12,6,13),
            (1,13,1,14),
            (1,13,2,14),
            (1,13,3,14),
            (1,13,4,14),
            (1,13,5,14),
            (1,13,6,14),
            (1,13,7,14),
            (1,13,8,14),
            (1,14,1,15),
            (1,14,2,15),
            (1,14,3,15),
            (1,14,4,15),
            (1,14,5,15),
            (1,14,6,15),
            (1,15,1,16),
            (1,15,2,16),
            (1,16,1,17),
            (1,16,2,17),
            (1,16,3,17),
            (1,16,4,17),
            (1,16,5,17),
            (1,16,6,18),
            (1,17,1,18),
            (1,17,2,18),
            (1,17,3,18),
            (1,17,4,18),
            (1,18,1,19),
            (1,18,2,19),
            (1,18,3,19),
            (1,19,1,0),
            (1,19,2,0),
            (1,19,3,0),
            (1,19,4,0),
            (1,19,5,0);
    SQL
  end

  def down
  end
end
